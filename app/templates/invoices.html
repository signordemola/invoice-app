{% extends "base.html" %} {% block title %}Invoices{% endblock %} {% block
content %}
<div class="py-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
  <header>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h1 class="text-3xl font-bold text-gray-900">Invoices</h1>
    </div>
  </header>

  <main class="my-6">
    {% if invoices %}
    <div class="">
      {% for invoice in invoices %}
      <div class="flex flex-col bg-white mb-4">
        <div class="card invoice-card p-3">
          <div class="spread-content mb-2">
            <b>{{ invoice.invoice_no }}</b>
            <span class="text-muted">Client #{{ invoice.client_id }}</span>
          </div>

          <p class="mb-1"><b>Due:</b> {{ invoice.invoice_due }}</p>

          <p class="mb-1"><b>Items:</b> {{ invoice.items | length }}</p>

          <p class="mb-3">
            <b>Total:</b> NGN {{ invoice.items | sum(attribute='amount') if
            invoice.items else "0.00" }}
          </p>

          <div class="text-right">
            <a
              href="/api/v1/invoices/{{ invoice.id }}"
              class="btn btn-sm btn-outline-primary"
            >
              View
            </a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    {% else %}
    <div class="alert alert-info text-center">No invoices found.</div>
    {% endif %}
  </main>
</div>

<!-- Hidden page input for pagination -->
<input type="hidden" name="page" value="1" id="current-page" />
{% endblock %}
