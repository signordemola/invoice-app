**Invoice Management System**

- **Project:**: Invoice Management System (FastAPI)
- **Location:**: `app/`
- **Purpose:**: Lightweight invoice, client, payment and expense management API with user authentication and database migrations.

**Quick Summary:**

- Implements a FastAPI application exposing routes under `GET /` and `GET /health` and an API router mounted at `/api/v1`.
- Includes user registration and login endpoints with JWT token generation.
- SQLAlchemy models + Alembic migrations for: users, clients, invoices, items, payments, expenses, recurrent bills, email queues/receipts.
- Uses pydantic settings via `app/config/settings.py` and a DB dependency in `app/config/database.py`.

**What I've built (current state)**

- Core app entrypoint: `app/main.py` — FastAPI app creation, CORS middleware, health and root endpoints, API router inclusion.
- API routing:
  - `app/api/v1/router.py` — includes `auth` routes. Additional endpoint files (`clients.py`, `invoices.py`) exist but are currently empty placeholders.
  - `app/api/v1/endpoints/auth.py` — implements:
    - `POST /api/v1/auth/register` -> create a new user (response model: `UserResponse`).
    - `POST /api/v1/auth/login` -> authenticate and return a JWT token (response model: `TokenResponse`).
- Authentication & security:
  - Password hashing and verification located in `app/core/security.py` (used by `auth` endpoint).
  - JWT token creation with configurable `SECRET_KEY`, `ALGORITHM`, `ACCESS_TOKEN_EXPIRE_MINUTES` via `app/config/settings.py`.
- Database layer:
  - `app/config/database.py` — SQLAlchemy `engine`, `SessionLocal`, `Base` and `get_db` dependency.
  - Alembic migrations available in `alembic/versions/` (initial schema `fc8acee66e49_initial_schema.py`) defining the DB tables and indices.
- Models:
  - `app/models/` contains SQLAlchemy models including `User` (`app/models/user.py`) and others referenced in `app/models/__init__.py` (Client, Invoice, Item, Payment, Expense, EmailQueue, EmailReceipt, RecurrentBill).
- Modules/services:
  - `app/modules/auth/service.py` exists as an auth service placeholder.
- Configuration & env:
  - `app/config/settings.py` uses `pydantic-settings` and `.env` support. Default `DATABASE_URL` points to `sqlite:///bot.db`.
- Dependencies listed in `requirements.txt` (FastAPI, SQLAlchemy 2.x, Alembic, PyJWT, uvicorn, etc.).

**Project structure (high level)**

- `app/` — main app package
  - `main.py` — FastAPI instance
  - `api/v1/` — API routers and endpoint modules
  - `config/` — `settings.py` and `database.py`
  - `core/` — security utilities
  - `models/` — SQLAlchemy models
  - `modules/` — business logic (auth placeholder)
  - `schemas/` — pydantic request/response schemas
- `alembic/` — migrations
- `requirements.txt` — python deps

**How to run (development)**

1. Create & activate virtualenv (example in PowerShell):

```powershell
python -m venv .venv
.\.venv\Scripts\Activate.ps1
pip install -r requirements.txt
```

2. Configure environment variables (create a `.env` file at the project root). Example minimal `.env`:

```text
ENV=development
DATABASE_URL=sqlite:///./bot.db
SECRET_KEY=dev-secret-key-change-in-production
```

3. Run database migrations (Alembic). Example commands:

```powershell
# ensure alembic.ini DB URL is set (it can read from env via settings); or set env before running:
$env:DATABASE_URL = "sqlite:///./bot.db";
alembic upgrade head
```

4. Start the app with uvicorn (from repo root):

```powershell
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

Visit `http://127.0.0.1:8000/api/v1/docs` for interactive API docs.

**Notable details & TODOs**

- `clients.py` and `invoices.py` endpoint files are empty — implement CRUD endpoints for clients and invoices.
- `app/modules/auth/service.py` is a placeholder; consider moving business logic (token validation, user lookup) into this module.
- Tests: no tests detected — recommend adding pytest tests for endpoints and services.
- Production readiness:
  - Replace default `SECRET_KEY` before deploying.
  - Configure a production DB (Postgres) via `DATABASE_URL` and update `alembic.ini` if needed.
  - Configure CORS origins, logging, and error reporting.

**Useful locations**

- App entry: `app/main.py`
- Auth endpoints: `app/api/v1/endpoints/auth.py`
- DB config: `app/config/database.py`
- Settings: `app/config/settings.py`
- Alembic migrations: `alembic/versions/`
- Models package: `app/models/` (exports in `app/models/__init__.py`)

**Next suggested steps**

- Implement missing endpoints for clients, invoices, items and payments.
- Add unit and integration tests.
- Add docs for setting up production DB and environment.

---

_README generated by assistant from current project files._
